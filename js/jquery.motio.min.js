(function(d){function C(g,p){function b(a,b){h&&h[a]&&h[a].fireWith(g,b);m.trigger(u+":"+a,b)}function q(){var a;r=setTimeout(function(){v(q)},1E3/c.fps);if(e)n[o]+=c.speed/c.fps,0<c.bgSize&&Math.abs(n[o])>c.bgSize&&(n[o]%=c.bgSize),a=n;else{switch(k){case "toStart":0>=--f&&(k=f=0,i.pause(),b("start"));break;case "toEnd":++f>=j.length-1&&(k=0,f=j.length-1,i.pause(),b("end"));break;case "to":f<w?f++:f>w&&f--;f===w&&(b("to",[g]),i.pause());break;default:++f>=j.length&&(f=0)}a=f}l(a)}function l(a){var d=
!e&&!isNaN(parseFloat(a))&&isFinite(a)?j[a]:"object"===typeof a?a.x+"px "+a.y+"px":!1;d&&(g.style.backgroundPosition=d,e||(f=a),b("frame",e?[a[o],c.bgSize]:[a,j.length]))}var m,c,e,r,t,j,f,x,n,o,k,w,i=this,h=!d.Callbacks?!1:{};this.pause=function(){r&&(r=clearTimeout(r),b("pause"))};this.play=function(){r||(q(),b("play"))};this.toggle=function(){b("toggle");i[r?"pause":"play"]()};this.set=function(a,b){-1!==d.inArray(a,["speed","fps"])&&(c[a]=b)};this.toStart=function(a){e||(a||0===f?(k=!1,b("start"),
i.pause(),l(0)):(k="toStart",i.play()))};this.toEnd=function(a){e||(a||f===j.length-1?(k=0,b("end"),i.pause(),l(j.length-1)):(k="toEnd",i.play()))};this.to=function(a,c){if(!e&&!(isNaN(parseFloat(a))||!isFinite(a)||0>a&&a>=j.length))c||a===f?(k=0,b("to",[a]),i.pause(),l(a)):(k="to",w=a,i.play())};this.on=function(a,b){h&&b&&(h[a]||(h[a]=d.Callbacks("unique")),h[a].add(b))};this.off=function(a,b){h&&h[a]&&(b?h[a].remove(b):h[a].empty())};this.destroy=function(){i.pause();m.css("backgroundPosition",
x);d.removeData(g,y)};m=d(g);c=d.extend({},d.fn[u].defaults,p);e=!c.frames;r=0;t=m[c.vertical?"innerHeight":"innerWidth"]();o=c.vertical?"y":"x";x=m.css("backgroundPosition")||m.css("backgroundPositionX")+" "+m.css("backgroundPositionY");var s=x.replace(/left|top/g,0).split(" ");n={x:parseInt(s[0],10),y:parseInt(s[1],10)};if(!e){s=n;j=[];for(var z=0;z<c.frames;z++)s[o]=z*-t,j.push(s.x+"px "+s.y+"px");f=-1}c.paused||q()}var u="motio",y="plugin_"+u,v;d.fn[u]=function(g,p){var b=!1,q,l=[];"undefined"!==
typeof g&&!d.isPlainObject(g)&&(b=!1===g?"destroy":g,q=arguments,Array.prototype.shift.call(q));this.each(function(m,c){var e=d.data(c,y);e&&b?e[b]&&e[b].apply(e,q):!e&&!b&&(e=d.data(c,y,new C(c,g)));l.push(e)});return p&&!b?1<l.length?l:l[0]:this};d.fn[u].defaults={fps:15,vertical:0,paused:0,frames:0,speed:50,bgSize:0};for(var A=0,B=["ms","moz","webkit","o"],t=0;t<B.length&&!v;++t)v=window[B[t]+"RequestAnimationFrame"];v||(v=function(d){var p=(new Date).getTime(),b=Math.max(0,16-(p-A));A=p+b;return setTimeout(function(){d(p+
b)},b)})})(jQuery);
